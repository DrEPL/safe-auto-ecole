{% load compress %} {% load static %}

{% comment %} 
  Dr EPL
  +242 06 946 28 86
{% endcomment %}

<!DOCTYPE html>
<html lang="fr">
  {% include 'partials/head.html' %}

  <body class="w-full mx-auto">
    {% include 'partials/navigation.html' %}

    <div class="w-full relative mx-auto">
      <div class="bg-bottom bg-background md:bg-bottom bg-no-repeat md:bg-cover md:h-[450px] h-[350px] flex items-end pb-8 w-full">
        <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black opacity-30"></div>
        {% comment %}
        <div class="absolute inset-0" style="
            background: linear-gradient(
              to bottom,
              transparent,
              rgba(0, 0, 0, 0.6)
            );
          "></div>
        {% endcomment %} {% comment %}
        <img src="{% static 'images/ecolemoto.jpg' %}" alt="" srcset="" /> {% endcomment %}
        <div class="text-white px-8 w-full z-10">
          <h3 class="mx-auto drop-shadow-2xl text-lg font-bold md:text-5xl text-white w-full text-center uppercase" data-aos="fade-up" data-aos-delay="500" data-aos-duration="1000" data-aos-offset="200">MAITRISEZ VOTRE LIBERTé</h3>
          <p class="drop-shadow-2xl mx-auto text-sm mt-4 w-11/12 md:w-7/12 font-light text-center uppercase" data-aos="fade-up" data-aos-delay="600" data-aos-duration="1000">Nous vous accompagnons vers le succès</p>
          <div class="flex justify-center mt-8 items-center mx-auto" data-aos="fade-up" data-aos-delay="700" data-aos-duration="1000">
            <button type="button" class="text-white bg-primary-700 hover:bg-primary-400 focus:outline-none font-medium rounded-lg text-sm px-4 py-2 text-center">Accueil</button>
          </div>
        </div>
      </div>
    </div>

    <div class="">
      {% block accueil %}

      {% endblock %} {% block about %}

      {% endblock %} {% block formations %}

      {% endblock %} {% block contact %}

      {% endblock %} {% block maps %}

      {% endblock %}
    </div>

    <a href="javascript:void(0)" class="hidden items-center justify-center bg-primary-300 text-white w-14 h-14 rounded-full fixed bottom-8 right-8 left-auto z-[999] hover:shadow-signUp hover:bg-opacity-80 transition duration-300 ease-in-out back-to-top shadow-md" style="display: none">
      <span class="w-3 h-3 border-t-2 border-l-2 border-white rotate-45 mt-[6px]"></span></a>

    {% include 'footer.html' %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/noframework.waypoints.min.js"></script>
    {% comment %}
    <script src="{% static 'js/aos.bundle.js' %}"></script>
    {% endcomment %}
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBNnWyBiWfcMChttyeyg5OyeTPdeUWgcAc&callback=initMap"></script>
    <script>
       AOS.init({
         once: false // Animation ne se reproduit qu'une seule fois
       })
       // Obtenez l'année en cours
       const currentYear = new Date().getFullYear()

       function initMap() {
         var location = { lat: -4.262585459173469, lng: 15.260471361378341 }
         var map = new google.maps.Map(document.getElementById('map'), {
           zoom: 18,
           center: location
         })
         var marker = new google.maps.Marker({
           position: location,
           map: map
         })
       }

       // Mettez à jour le texte dans la balise span avec le copyright
       document.getElementById('copyright').innerHTML = `&copy; ${currentYear} <a href="https://www.grandrhemacommunication.cg" class="hover:text-gray-200 font-bold">GRAND RHEMA</a><span class="text-white"> | SAFE</span>. All Rights Reserved, developped by Dr EPL.`

      {% comment %} document.addEventListener('DOMContentLoaded', function () {
         var sections = document.querySelectorAll('section')

         sections.forEach(function (section) {
           new Waypoint({
             element: section,
             handler: function (direction) {
               document.querySelectorAll('nav a').forEach(function (link) {
                 link.classList.remove('text-primary-700')
                 link.classList.add('text-gray-900')
               })

               document.querySelector('a[href="#' + section.id + '"]').classList.remove('text-gray-900')
               document.querySelector('a[href="#' + section.id + '"]').classList.add('text-primary-700')
             },
             offset: '25%' // Déclenche le waypoint lorsque le haut de la section atteint 25% de la fenêtre
           })
         })
       }) {% endcomment %}

           // ==== for menu scroll
           const pageLink = document.querySelectorAll('.menu-scroll');

           pageLink.forEach((elem) => {
             elem.addEventListener('click', (e) => {
               e.preventDefault();
               document.querySelector(elem.getAttribute('href')).scrollIntoView({
                 behavior: 'smooth',
                 offsetTop: 1 - 60,
               });
             });
           });

           // section menu active
           function onScroll(event) {
             const sections = document.querySelectorAll('.menu-scroll');
             const scrollPos = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;

             for (let i = 0; i < sections.length; i++) {
               const currLink = sections[i];
               const val = currLink.getAttribute('href');
               const refElement = document.querySelector(val);
               const scrollTopMinus = scrollPos + 73;
               if (refElement.offsetTop <= scrollTopMinus && refElement.offsetTop + refElement.offsetHeight > scrollTopMinus) {
                 document.querySelector('.menu-scroll').classList.remove('text-primary-700');
                 currLink.classList.add('text-primary-700');
               } else {
                 currLink.classList.remove('text-primary-700');
               }
             }
           }

           window.document.addEventListener('scroll', onScroll);

           (function () {
            'use strict'; 
          
            // ======= Sticky
          
            window.onscroll = function () {
              var ud_header = document.querySelector('.header');
              var menu_scroll = document.querySelectorAll('.menu-scroll');
              var sticky = ud_header.offsetTop;

          
              if (window.pageYOffset > sticky) {
                //ud_header.classList.remove('sticky');
                //ud_header.classList.add('fixed');
                //ud_header.classList.remove('bg-yellow-500');
                ud_header.classList.add('bg-purple-100/50');
                ud_header.classList.add('backdrop-blur-md');
                ud_header.classList.add('border');
                menu_scroll.forEach((e) => {
                  e.classList.remove('text-white');
                })
              } else {
                //ud_header.classList.add('sticky');
                menu_scroll.forEach((e) => {
                  e.classList.add('text-white');
                })
                ud_header.classList.remove('border');
                ud_header.classList.remove('bg-purple-100/50');
                ud_header.classList.remove('backdrop-blur-md');
                //ud_header.classList.remove('fixed');
              }
          
              // show or hide the back-top-top button
          
              var backToTop = document.querySelector('.back-to-top');
          
              if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                backToTop.style.display = 'flex';
              } else {
                backToTop.style.display = 'none';
              }
            };
          
            // ====== scroll top js
          
            function scrollTo(element) {
              var to = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
              var duration = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 500;
              var start = element.scrollTop;
              var change = to - start;
              var increment = 20;
              var currentTime = 0;
          
              var animateScroll = function animateScroll() {
                currentTime += increment;
                var val = Math.easeInOutQuad(currentTime, start, change, duration);
                element.scrollTop = val;
          
                if (currentTime < duration) {
                  setTimeout(animateScroll, increment);
                }
              };
          
              animateScroll();
            }
          
            Math.easeInOutQuad = function (t, b, c, d) {
              t /= d / 2;
              if (t < 1) return c / 2 * t * t + b;
              t--;
              return -c / 2 * (t * (t - 2) - 1) + b;
            };
          
            document.querySelector('.back-to-top').onclick = function () {
              scrollTo(document.documentElement);
            };
          
          })(); 
    </script>
  </body>
</html>
