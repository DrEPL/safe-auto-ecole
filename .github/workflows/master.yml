on:
  push:
    branches:
      - master
name: ðŸš€ Commit to Safe Auto Ecole's servrer
jobs:
  web-deploy:
    name: ðŸŽ‰ Deploy
    runs-on: ubuntu-latest
    steps:
      - name: ðŸšš Get latest code
        uses: actions/checkout@v3

      - name: ðŸ“‚ Sync files
        uses: SamKirkland/FTP-Deploy-Action@v4.3.4

      - name: ðŸ”¨ Build Project
          run: |
            # compile css
            npx tailwindcss -i ./static/src/input.css -o ./static/src/output.css --watch

            # compile aos 
            npx webpack --config webpack.config.js

        with:
          server: safeautoecole.cg
          username: ${{ secrets.ftp_username }}
          password: ${{ secrets.ftp_password }}
          server-dir: /safeautoecole.cg/
